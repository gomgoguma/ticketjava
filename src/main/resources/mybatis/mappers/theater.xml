<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="theater">
	
	<insert id="theaterAdd" parameterType="TheaterVo">
	
		<selectKey keyProperty="theaterNo" resultType="int" order="BEFORE">	
			select seq_theater_no.nextval from dual
		</selectKey>
		
		<![CDATA[
			insert into theater
			values (#{theaterNo}, #{theaterName}, #{postCode}, #{address}, #{address2}, #{latitude}, #{longitude}, #{phone}, #{homePage}, #{logoPath})	
		]]>
	</insert>
	
	
	<select id="selectTheater" parameterType="TheaterVo" resultType="TheaterVo">
		<![CDATA[
			select			theater_no,
							theatername, 
							postcode, 
							address, 
							address2, 
							latitude, 
							longitude, 
							phone, 
							homepage, 
							logopath
			from			theater
			where			theater_no= #{theaterNo}
		]]>
	</select>
	
	
	<select id="getList" resultType="TheaterVo">
		<![CDATA[
			select			t.theater_no theaterNo,
							theaterName,
							postcode,
							address, 
							address2,
							latitude,
							longitude,  
							phone, 
							homepage,
							logopath,  
							h.hallname hallName
			from			theater t, hall h
			where			t.theater_no= h.theater_no
			order by		t.theater_no desc, hall_no desc
		]]>
	</select>
	
</mapper>



