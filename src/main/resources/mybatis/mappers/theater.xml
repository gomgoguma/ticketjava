<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="theater">
	
	<insert id="theaterAdd" parameterType="TheaterVo">
	
		<selectKey keyProperty="theaterNo" resultType="int" order="BEFORE">	
			select seq_theater_no.nextval from dual
		</selectKey>
		
		<![CDATA[
			insert into theater
			values (#{theaterNo}, #{theaterName}, #{postCode}, #{address}, #{address2}, #{latitude}, #{longitude}, #{phone}, #{homePage}, #{logoPath})	
		]]>
	</insert>
	
	
	<select id="selectTheater" parameterType="TheaterVo" resultType="TheaterVo">
		<![CDATA[
			select			theater_no,
							theatername, 
							postcode, 
							address, 
							address2, 
							latitude, 
							longitude, 
							phone, 
							homepage, 
							logopath
			from			theater
			where			theater_no= #{theaterNo}
		]]>
	</select>
	
	<update id="update" parameterType="TheaterVo">
		<![CDATA[
			update			theater
			set 			theatername= #{theaterName},
							postcode= #{postCode},
							address= #{address},
							address2= #{address2},
							phone= #{phone},
							homepage= #{homePage},
							logoPath= #{logoPath}
			where 			theater_no= #{theaterNo}
		]]>
	</update>
	
	
	<!-- theater.jsp에서 가져오는 theaterList -->
	<select id="getList" resultType="TheaterVo">
		<![CDATA[
			select distinct t.theater_no theaterNo, 
							theatername, 
							logopath,
							homepage
			from 			theater t, hall h
			where 			t.theater_no= h.theater_no
		]]>
	</select>
	
	
	<!-- 공연장 공지사항 등록할때 select-optionList -->
	<select id="selectList" resultType="TheaterVo">
		<![CDATA[
			select distinct t.theater_no theaterNo, theatername
			from 			theater t, hall h
			where 			t.theater_no= h.theater_no
		]]>
	</select>
	
	
	
</mapper>



