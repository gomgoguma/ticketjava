<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="notireq">
		
		<select id="selectReq" parameterType="NotireqVo" resultType="NotireqVo">
			<![CDATA[
				select req_no reqNo,
					   selSection,
					   interval,
					   notiTimes
				from notireq
				where prod_no = #{prodNo} and user_no = #{userNo} and viewDate = #{viewDate}
			]]>		
		</select>
		
		<select id="selectReqList" parameterType="int" resultType="NotireqVo">
			<![CDATA[
				select req_no reqNo,
					   to_char(reqDate,'yyyy-mm-dd') reqDate,
					   prodName,
					   selSection,
					   n.status,
					   n.prod_no prodNo,
					   to_char(viewDate,'yyyy-mm-dd') viewDate,
					   interval,
					   notiTimes
				from notireq n, product p
				where n.prod_no = p.prod_no and 
					  n.user_no = #{userNo}
			]]>		
		</select>
		
		<insert id="insertNotireq" parameterType="NotireqVo">
			<![CDATA[
				insert into notireq
				values( seq_req_no.nextval,
						#{userNo},
						#{prodNo},
						#{viewDate},
						#{selSection},
						#{interval},
						#{notiTimes},
						sysdate,
						1
					)
			]]>				
		</insert>
		
		<delete id="deleteReq" parameterType="NotireqVo">
			<![CDATA[
				delete from notireq
				where prod_no = #{prodNo} and user_no = #{userNo} and viewDate = #{viewDate}
			]]>			
		</delete>
		
</mapper>



